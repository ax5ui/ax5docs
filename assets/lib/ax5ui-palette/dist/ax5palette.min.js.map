{"version":3,"sources":["ax5palette.js","ax5palette-tmpl.js"],"names":["UI","ax5","ui","U","util","PALETTE","addClass","className","_this","this","self","cfg","instanceId","getGuid","target","config","clickEventName","theme","animateTime","colors","preview","width","height","cellWidth","label","slider","trackHeight","amount","handleWidth","handleHeight","list","value","controls","columnKeys","xvar","ENM","mousedown","info","supportTouch","mousemove","mouseup","getMousePosition","e","mouseObj","originalEvent","changedTouches","clientX","pageX","clientY","pageY","bindHandle","item","originalTrackWidth","$track","trackWidth","handleLeft","amountToHandleLeft","_amount","handleLeftToAmount","updatePreviewColor","amountToColor","$handle","css","left","$item","off","on","_originalHandleClientX","_originalHandleLeft","position","handleMoveEvent","stopEvent","onClick","call","_selectedColor","toUpperCase","getAttribute","newHandleLeft","offset","color","event","$preview","background-color","$label","html","onUpdateColor","processor","black","_color","lighten","darken","getHexValue","white","normal","_uniqColor","colorToAmount","_diffColor","color1","getHsl","l","jQuery","document","body","da","attr","resizerLived","removeAttr","repaint","selectedColor","$target","innerWidth","innerHeight","tmpl","get","$","root","find","forEach","c","r","g","b","_color0value","_color1value","_color2value","handleTop","each","idx","extend","_index","push","setSelectedColor","init","onStateChanged","console","log","getError","setTimeout","trim","sColor","minDiffColor","minDiffColorIndex","cidx","c1hsl","c2hsl","diffColor","Math","abs","h","s","main","palette_instance","arguments","isObject","setConfig","apply","palette","tmpl_frame","tmpl_colors","frame","tmplName","data","mustache","render"],"mappings":"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","file":"ax5palette.min.js","sourcesContent":["// ax5.ui.palette\n(function () {\n\n    const UI = ax5.ui;\n    const U = ax5.util;\n    let PALETTE;\n\n    UI.addClass({\n        className: \"palette\"\n    }, (function () {\n\n        /**\n         * @class ax5palette\n         * @classdesc\n         * @author tom@axisj.com\n         * @example\n         * ```js\n         * ```\n         */\n        return function () {\n            let self = this,\n                cfg;\n\n            this.instanceId = ax5.getGuid();\n            this.target = null;\n            this.config = {\n                clickEventName: \"click\",\n                theme: 'default',\n                animateTime: 100,\n                colors: {\n                    preview: {\n                        width: 24,\n                        height: 24,\n                        cellWidth: 30\n                    },\n                    label: {\n                       width: 80\n                    },\n                    slider: {\n                        trackHeight: 8,\n                        amount: 32,\n                        handleWidth: 18,\n                        handleHeight: 18,\n                    },\n                    list: [\n                        {label: \"red\", value: \"#ff0000\"},\n                        {label: \"orange\", value: \"#ff9802\"},\n                        {label: \"yellow\", value: \"#ffff00\"},\n                        {label: \"green\", value: \"#00ff36\"},\n                        {label: \"blue\", value: \"#0000ff\"},\n                        {label: \"purple\", value: \"#ba00ff\"},\n                        //{label: \"skyblue\", value: \"#84e4ff\"},\n                        //{label: \"pink\", value: \"#ff77c4\"},\n                        {label: \"black\", value: \"#000000\"},\n                        {label: \"white\", value: \"#ffffff\"},\n                    ],\n                },\n                controls: {\n                    height: 0,\n                },\n                columnKeys: {}\n            };\n            this.xvar = {};\n            this.colors = [];\n\n            cfg = this.config;\n\n            const ENM = {\n                \"mousedown\": (ax5.info.supportTouch) ? \"touchstart\" : \"mousedown\",\n                \"mousemove\": (ax5.info.supportTouch) ? \"touchmove\" : \"mousemove\",\n                \"mouseup\": (ax5.info.supportTouch) ? \"touchend\" : \"mouseup\"\n            };\n\n            const onStateChanged = (opts, that) => {\n                if (opts && opts.onStateChanged) {\n                    opts.onStateChanged.call(that, that);\n                }\n                else if (this.onStateChanged) {\n                    this.onStateChanged.call(that, that);\n                }\n\n                that = null;\n            };\n\n            /**\n             * get mouse position\n             * @param e\n             * @returns {{clientX, clientY}}\n             */\n            const getMousePosition = (e) => {\n                let mouseObj, originalEvent = (e.originalEvent) ? e.originalEvent : e;\n                mouseObj = ('changedTouches' in originalEvent && originalEvent.changedTouches) ? originalEvent.changedTouches[0] : originalEvent;\n                // clientX, Y 쓰면 스크롤에서 문제 발생\n                return {\n                    clientX: mouseObj.pageX,\n                    clientY: mouseObj.pageY\n                }\n            };\n\n            const bindHandle = (item) => {\n                item.originalTrackWidth = item.$track.width();\n                item.trackWidth = item.originalTrackWidth - (cfg.colors.slider.handleWidth / 5);\n                let handleLeft = amountToHandleLeft(item, item._amount);\n\n                // handleLeft 가 범위를 벗어나면?\n                if (handleLeft < 0 || handleLeft > item.trackWidth) {\n                    let amount;\n                    handleLeft = handleLeft < 0 ? 0 : handleLeft > item.trackWidth ? item.trackWidth : handleLeft;\n                    amount = handleLeftToAmount(item, handleLeft);\n                    updatePreviewColor(item, amountToColor(item, amount));\n                }\n\n                item.$handle.css({left: handleLeft});\n                item.$item\n                    .off(ENM[\"mousedown\"])\n                    .on(ENM[\"mousedown\"], '[data-panel=\"color-handle\"]', function (e) {\n                        let mouseObj = getMousePosition(e);\n                        item._originalHandleClientX = mouseObj.clientX;\n                        item._originalHandleLeft = item.$handle.position().left;\n                        handleMoveEvent.on(item);\n                        U.stopEvent(e.originalEvent);\n                    })\n                    .off(\"click\")\n                    .on(\"click\", '[data-panel=\"color-label\"], [data-panel=\"color-preview\"]', function (e) {\n                        if(self.onClick){\n                            self.onClick.call(item, '#' + item._selectedColor.toUpperCase(), e);\n                        }\n                    })\n                    .on(\"click\", '[data-panel=\"color-track\"]', function (e) {\n                        if(e.target.getAttribute(\"data-panel\") == \"color-track\") {\n                            let mouseObj = getMousePosition(e),\n                                newHandleLeft = mouseObj.clientX - item.$track.offset().left,\n                                amount = handleLeftToAmount(item, newHandleLeft);\n\n                            item.$handle.css({left: newHandleLeft});\n                            updatePreviewColor(item, amountToColor(item, amount), e);\n\n                            mouseObj = null;\n                            newHandleLeft = null;\n                            amount = null;\n                        }\n                    });\n            };\n\n            const updatePreviewColor = (item, color, event) => {\n                item.$preview\n                    .css({\"background-color\": '#' + color});\n                item.$label.html('#' + color.toUpperCase());\n                item._selectedColor = color;\n\n                if(event && self.onUpdateColor){\n                    self.onUpdateColor.call(item, '#' + item._selectedColor.toUpperCase());\n                }\n            };\n\n            const amountToColor = (item, amount) => {\n                let processor = {\n                    \"black\"(_color, _amount){\n                        return _color.lighten(cfg.colors.slider.amount / 2).darken(_amount).getHexValue();\n                    },\n                    \"white\"(_color, _amount){\n                        return _color.darken(cfg.colors.slider.amount / 2).darken(_amount).getHexValue();\n                    },\n                    \"normal\"(_color, _amount){\n                        return _color.darken(_amount).getHexValue();\n                    }\n                };\n\n                if (item._uniqColor in processor) {\n                    return processor[item._uniqColor](item._color, amount);\n                } else {\n                    return processor[\"normal\"](item._color, amount);\n                }\n            };\n\n            const colorToAmount = (item, color) => {\n                /// todo : 색상에 가까운 색 표현.\n                let processor = {\n                    \"black\"(_color, _diffColor){\n                        let color1 = _color.lighten(cfg.colors.slider.amount / 2);\n                        return (color1.getHsl().l - _diffColor.getHsl().l) * 100;\n                    },\n                    \"white\"(_color, _diffColor){\n                        let color1 = _color.darken(cfg.colors.slider.amount / 2);\n                        return (color1.getHsl().l - _diffColor.getHsl().l) * 100;\n                    },\n                    \"normal\"(_color, _diffColor){\n                        return (_color.getHsl().l - _diffColor.getHsl().l) * 100;\n                    }\n                };\n\n                if (item._uniqColor in processor) {\n                    return processor[item._uniqColor](item._color, color);\n                } else {\n                    return processor[\"normal\"](item._color, color);\n                }\n            };\n\n            const handleLeftToAmount = (item, handleLeft) => {\n                return cfg.colors.slider.amount * (handleLeft - (item.trackWidth / 2)) / (item.originalTrackWidth / 2)\n            };\n\n            const amountToHandleLeft = (item, amount) => {\n                return (amount * (item.originalTrackWidth / 2) / cfg.colors.slider.amount) + (item.trackWidth / 2)\n            };\n\n            const handleMoveEvent = {\n                \"on\": (item) => {\n                    jQuery(document.body)\n                        .on(ENM[\"mousemove\"] + \".ax5palette-\" + this.instanceId, function (e) {\n                            let mouseObj = getMousePosition(e),\n                                da = mouseObj.clientX - item._originalHandleClientX,\n                                newHandleLeft = item._originalHandleLeft + da,\n                                amount;\n\n                            newHandleLeft = newHandleLeft < 0 ? 0 : newHandleLeft > item.trackWidth ? item.trackWidth : newHandleLeft;\n                            item.$handle.css({left: newHandleLeft});\n                            amount = handleLeftToAmount(item, newHandleLeft);\n\n                            updatePreviewColor(item, amountToColor(item, amount), e);\n                            \n                            mouseObj = null;\n                            da = null;\n                        })\n                        .on(ENM[\"mouseup\"] + \".ax5palette-\" + this.instanceId, function (e) {\n                            handleMoveEvent.off();\n                            U.stopEvent(e);\n                        })\n                        .on(\"mouseleave.ax5palette-\" + this.instanceId, function (e) {\n                            handleMoveEvent.off();\n                            U.stopEvent(e);\n                        });\n\n                    jQuery(document.body)\n                        .attr('unselectable', 'on')\n                        .css('user-select', 'none')\n                        .on('selectstart', false);\n                },\n                \"off\": () => {\n                    self.xvar.resizerLived = false;\n\n                    jQuery(document.body)\n                        .off(ENM[\"mousemove\"] + \".ax5palette-\" + this.instanceId)\n                        .off(ENM[\"mouseup\"] + \".ax5palette-\" + this.instanceId)\n                        .off(\"mouseleave.ax5palette-\" + this.instanceId);\n\n                    jQuery(document.body)\n                        .removeAttr('unselectable')\n                        .css('user-select', 'auto')\n                        .off('selectstart');\n                }\n            };\n\n            const repaint = (selectedColor) => {\n                let box = {\n                    width: this.$target.innerWidth(),\n                    height: this.$target.innerHeight(),\n                };\n\n                // 패널 프레임 초기화\n                this.$target.html(PALETTE.tmpl.get(\"frame\", {}, cfg.columnKeys));\n\n                // 각 패널들을 캐싱~\n                this.$ = {\n                    \"root\": this.$target.find('[data-ax5palette-container=\"root\"]'),\n                    \"colors\": this.$target.find('[data-ax5palette-container=\"colors\"]'),\n                    \"controls\": this.$target.find('[data-ax5palette-container=\"controls\"]'),\n                };\n\n                // todo : controls 나중에 고민하여 구현\n                // this.$[\"controls\"].css({height: cfg.controls.height});\n\n                /// colors.list 색상 범위 결정 / 초기화\n                cfg.colors.list.forEach(function (c) {\n                    c._color = U.color(c.value);\n                    c._selectedColor = c._color.getHexValue();\n                    if (c._color.r == 0 && c._color.g == 0 && c._color.b == 0) {\n                        c._amount = cfg.colors.slider.amount;\n                        c._uniqColor = \"black\";\n                        c._color0value = \"#\" + c._color.lighten(cfg.colors.slider.amount).getHexValue();\n                        c._color1value = \"#\" + c._color.lighten(cfg.colors.slider.amount / 2).getHexValue();\n                        c._color2value = \"#\" + c._color.getHexValue();\n                    } else if (c._color.r == 255 && c._color.g == 255 && c._color.b == 255) {\n                        c._amount = -cfg.colors.slider.amount;\n                        c._uniqColor = \"white\";\n                        c._color0value = \"#\" + c._color.getHexValue();\n                        c._color1value = \"#\" + c._color.darken(cfg.colors.slider.amount / 2).getHexValue();\n                        c._color2value = \"#\" + c._color.darken(cfg.colors.slider.amount).getHexValue();\n                    } else {\n                        c._amount = 0;\n                        c._color0value = \"#\" + c._color.lighten(cfg.colors.slider.amount).getHexValue();\n                        c._color1value = \"#\" + c._color.getHexValue();\n                        c._color2value = \"#\" + c._color.darken(cfg.colors.slider.amount).getHexValue();\n                    }\n                });\n\n                // 색생조절 핸들의 위치 조정cfg.colors.list[minDiffColorIndex]\n                cfg.colors.slider.handleLeft = -cfg.colors.slider.handleWidth / 2;\n                cfg.colors.slider.handleTop = -cfg.colors.slider.handleHeight / 2;\n\n                // 팔렛트 컬러 패널 초기화\n                this.$[\"colors\"].html(PALETTE.tmpl.get(\"colors\", cfg, cfg.columnKeys));\n\n                this.$[\"colors\"].find('[data-ax5palette-color-index]').each(function () {\n                    let idx = this.getAttribute(\"data-ax5palette-color-index\");\n                    let color = cfg.colors.list[idx];\n                    let item = jQuery.extend({}, color);\n                    item._index = idx;\n                    item.$item = jQuery(this);\n                    item.$preview = item.$item.find('[data-panel=\"color\"]');\n                    item.$label = item.$item.find('[data-panel=\"color-label\"]');\n                    item.$track = item.$item.find('[data-panel=\"color-track\"]');\n                    item.$handle = item.$item.find('[data-panel=\"color-handle\"]');\n                    bindHandle(item);\n                    /////\n                    self.colors.push(item);\n                });\n\n                if(selectedColor){\n                    this.setSelectedColor(selectedColor);\n                }\n            };\n\n            /**\n             * Preferences of palette UI\n             * @method ax5palette.setConfig\n             * @param {Object} config\n             * @param {Element} config.target\n             * @param {String} [config.selectedColor]\n             * @param {Object} [config.colors]\n             * @param {Object} [config.colors.preview]\n             * @param {Number} [config.colors.preview.width=24]\n             * @param {Number} [config.colors.preview.height=24]\n             * @param {Number} [config.colors.preview.cellWidth=30]\n             * @param {Object} [config.colors.label]\n             * @param {Number} [config.colors.label.width=80]\n             * @param {Object} [config.colors.slider]\n             * @param {Number} [config.colors.slider.trackHeight=8]\n             * @param {Number} [config.colors.slider.amount=32]\n             * @param {Number} [config.colors.slider.handleWidth=18]\n             * @param {Number} [config.colors.slider.handleHeight=18]\n             * @param {Object[]} [config.colors.list=[red,orange,yellow,green,blue,purple,black,white]]\n             * @param {String} config.colors.list[].label\n             * @param {String} config.colors.list[].value\n             * @param {Object} [config.controls]\n             * @param {Number} [config.controls.height=0]\n             * @returns {ax5palette}\n             * @example\n             * ```js\n             * myPalette = new ax5.ui.palette({\n             *  target: $('[data-ax5palette=\"01\"]'),\n             *  onClick: function (hexColor) {\n             *      alert(hexColor);\n             *  }\n             * });\n             *\n             * myPalette = new ax5.ui.palette({\n             *  target: $('[data-ax5palette=\"01\"]'),\n             *  colors: {\n             *      list: [\n             *          {label: \"red\", value: \"#ff0000\"},\n             *          {label: \"orange\", value: \"#ff9802\"},\n             *          {label: \"yellow\", value: \"#ffff00\"},\n             *          {label: \"skyblue\", value: \"#84e4ff\"},\n             *          {label: \"white\", value: \"#ffffff\"}\n             *      ]\n             *  }\n             *  onClick: function (hexColor) {\n             *  }\n             * });\n             * ```\n             */\n            this.init = function () {\n                // after setConfig();\n                this.onStateChanged = cfg.onStateChanged;\n                this.onClick = cfg.onClick;\n                this.onUpdateColor = cfg.onUpdateColor;\n\n                if (!cfg.target) {\n                    console.log(ax5.info.getError(\"ax5palette\", \"401\", \"setConfig\"));\n                }\n                this.$target = jQuery(cfg.target);\n\n                setTimeout(function () {\n                    repaint((cfg.selectedColor||\"\").trim()); // 팔렛트 그리기.\n                });\n            };\n\n            /**\n             * @method ax5palette.repaint\n             * @returns {ax5palette}\n             */\n            this.repaint = function () {\n                repaint();\n                return this;\n            };\n\n            /**\n             * @method ax5palette.setSelectedColor\n             * @param selectedColor\n             * @returns {ax5palette}\n             */\n            this.setSelectedColor = function (selectedColor) {\n\n                let sColor = U.color(selectedColor.trim());\n                // 지정된 색이 가장 가까운 파렛 검색\n                let minDiffColor = 255 * 3, minDiffColorIndex = -1;\n\n                self.colors.forEach(function (c, cidx) {\n                    let c1hsl = c._color.getHsl(), c2hsl =  sColor.getHsl();\n                    let diffColor = Math.abs(c1hsl.h - c2hsl.h) + Math.abs(c1hsl.s - c2hsl.s) + Math.abs(c1hsl.l - c2hsl.l);\n                    if (diffColor < minDiffColor) {\n                        minDiffColor = diffColor;\n                        minDiffColorIndex = cidx;\n                    }\n                });\n\n                if (minDiffColorIndex > -1) {\n                    let amount, handleLeft,\n                        item = self.colors[minDiffColorIndex];\n\n                    item._amount = colorToAmount(item, sColor);\n                    handleLeft = amountToHandleLeft(item, item._amount);\n                    //handleLeft = handleLeft < 0 ? 0 : handleLeft > item.trackWidth ? item.trackWidth : handleLeft;\n                    item.$handle.css({left: handleLeft});\n\n                    amount = handleLeftToAmount(item, handleLeft);\n                    updatePreviewColor(item, amountToColor(item, amount));\n                }\n\n                return this;\n            };\n\n            // 클래스 생성자\n            this.main = (function () {\n\n                UI.palette_instance = UI.palette_instance || [];\n                UI.palette_instance.push(this);\n\n                if (arguments && U.isObject(arguments[0])) {\n                    this.setConfig(arguments[0]);\n                }\n            }).apply(this, arguments);\n        };\n    })());\n\n    PALETTE = ax5.ui.palette;\n})();","// ax5.ui.calendar.tmpl\n(function () {\n\n    const PALETTE = ax5.ui.palette;\n\n    const tmpl_frame = function (columnKeys) {\n        return `\n<div data-ax5palette-container=\"root\">\n    <div data-ax5palette-container=\"colors\"></div>\n    <div data-ax5palette-container=\"controls\"></div>\n</div>\n`;\n    };\n\n    const tmpl_colors = function (columnKeys) {\n        return `\n{{#colors}}\n{{#list}}\n<div data-ax5palette-color=\"{{label}}\" data-ax5palette-color-index=\"{{@i}}\">\n    <div data-panel=\"color-preview\" style=\"padding:{{preview.cellPadding}}px;width:{{preview.cellWidth}}px;\">\n        <div data-panel=\"color-box\" style=\"width:{{preview.width}}px;height:{{preview.height}}px;\"><div data-panel=\"color\" style=\"background-color:{{value}};\"></div></div>\n    </div>\n    <div data-panel=\"color-label\" style=\"width:{{label.width}}px;\">{{label}}</div>\n    <div data-panel=\"color-slider\">\n        <div data-panel=\"color-track\" style=\"height:{{slider.trackHeight}}px;background: linear-gradient(90deg, {{_color0value}}, {{_color1value}}, {{_color2value}}); \">\n            <div data-panel=\"color-handle\">\n                <div data-panel=\"color-handle-after\" style=\"width:{{slider.handleWidth}}px;height:{{slider.handleWidth}}px;left:{{slider.handleLeft}}px;top:{{slider.handleLeft}}px;\"></div>\n            </div>\n        </div>\n    </div>\n</div>\n{{/list}}\n{{/colors}}\n`;\n    };\n\n\n    PALETTE.tmpl = {\n        \"frame\": tmpl_frame,\n        \"colors\": tmpl_colors,\n\n        get: function (tmplName, data, columnKeys) {\n            return ax5.mustache.render(PALETTE.tmpl[tmplName].call(this, columnKeys), data);\n        }\n    };\n\n})();"]}