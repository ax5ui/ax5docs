"use strict";!function(){var e=ax5.ui,t=ax5.util,l=void 0;e.addClass({className:"palette"},function(){return function(){var o=this,a=this,n=void 0;this.instanceId=ax5.getGuid(),this.target=null,this.config={clickEventName:"click",theme:"default",animateTime:100,colors:{preview:{width:24,height:24,cellWidth:30},label:{width:80},slider:{trackHeight:8,amount:32,handleWidth:18,handleHeight:18},list:[{label:"red",value:"#ff0000"},{label:"orange",value:"#ff9802"},{label:"yellow",value:"#ffff00"},{label:"green",value:"#00ff36"},{label:"blue",value:"#0000ff"},{label:"purple",value:"#ba00ff"},{label:"black",value:"#000000"},{label:"white",value:"#ffffff"}]},controls:{height:0},columnKeys:{}},this.xvar={},this.colors=[],n=this.config;var r=function(e){var t=void 0,l=e.originalEvent?e.originalEvent:e;return t="changedTouches"in l&&l.changedTouches?l.changedTouches[0]:l,{clientX:t.pageX,clientY:t.pageY}},i=function(e){e.originalTrackWidth=e.$track.width(),e.trackWidth=e.originalTrackWidth-n.colors.slider.handleWidth/5;var l=h(e,e._amount);if(l<0||l>e.trackWidth){var o=void 0;l=l<0?0:l>e.trackWidth?e.trackWidth:l,o=u(e,l),c(e,d(e,o))}e.$handle.css({left:l}),e.$item.off("mousedown").on("mousedown",'[data-panel="color-handle"]',function(l){var o=r(l);e._originalHandleClientX=o.clientX,e._originalHandleLeft=e.$handle.position().left,f.on(e),t.stopEvent(l.originalEvent)}).off("click").on("click",'[data-panel="color-label"], [data-panel="color-preview"]',function(t){a.onClick&&a.onClick.call(e,"#"+e._selectedColor.toUpperCase(),t)}).on("click",'[data-panel="color-track"]',function(t){if("color-track"==t.target.getAttribute("data-panel")){var l=r(t),o=l.clientX-e.$track.offset().left,a=u(e,o);e.$handle.css({left:o}),c(e,d(e,a),t),l=null,o=null,a=null}})},c=function(e,t,l){e.$preview.css({"background-color":"#"+t}),e.$label.html("#"+t.toUpperCase()),e._selectedColor=t,l&&a.onUpdateColor&&a.onUpdateColor.call(e,"#"+e._selectedColor.toUpperCase())},d=function(e,t){var l={black:function(e,t){return e.lighten(n.colors.slider.amount/2).darken(t).getHexValue()},white:function(e,t){return e.darken(n.colors.slider.amount/2).darken(t).getHexValue()},normal:function(e,t){return e.darken(t).getHexValue()}};return e._uniqColor in l?l[e._uniqColor](e._color,t):l.normal(e._color,t)},s=function(e,t){var l={black:function(e,t){var l=e.lighten(n.colors.slider.amount/2);return 100*(l.getHsl().l-t.getHsl().l)},white:function(e,t){var l=e.darken(n.colors.slider.amount/2);return 100*(l.getHsl().l-t.getHsl().l)},normal:function(e,t){return 100*(e.getHsl().l-t.getHsl().l)}};return e._uniqColor in l?l[e._uniqColor](e._color,t):l.normal(e._color,t)},u=function(e,t){return n.colors.slider.amount*(t-e.trackWidth/2)/(e.originalTrackWidth/2)},h=function(e,t){return t*(e.originalTrackWidth/2)/n.colors.slider.amount+e.trackWidth/2},f={on:function(e){jQuery(document.body).on("mousemove.ax5palette-"+o.instanceId,function(t){var l=r(t),o=l.clientX-e._originalHandleClientX,a=e._originalHandleLeft+o,n=void 0;a=a<0?0:a>e.trackWidth?e.trackWidth:a,e.$handle.css({left:a}),n=u(e,a),c(e,d(e,n),t),l=null,o=null}).on("mouseup.ax5palette-"+o.instanceId,function(e){f.off(),t.stopEvent(e)}).on("mouseleave.ax5palette-"+o.instanceId,function(e){f.off(),t.stopEvent(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){a.xvar.resizerLived=!1,jQuery(document.body).off("mousemove.ax5palette-"+o.instanceId).off("mouseup.ax5palette-"+o.instanceId).off("mouseleave.ax5palette-"+o.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},v=function(e){({width:o.$target.innerWidth(),height:o.$target.innerHeight()});o.$target.html(l.tmpl.get("frame",{},n.columnKeys)),o.$={root:o.$target.find('[data-ax5palette-container="root"]'),colors:o.$target.find('[data-ax5palette-container="colors"]'),controls:o.$target.find('[data-ax5palette-container="controls"]')},n.colors.list.forEach(function(e){e._color=t.color(e.value),e._selectedColor=e._color.getHexValue(),0==e._color.r&&0==e._color.g&&0==e._color.b?(e._amount=n.colors.slider.amount,e._uniqColor="black",e._color0value="#"+e._color.lighten(n.colors.slider.amount).getHexValue(),e._color1value="#"+e._color.lighten(n.colors.slider.amount/2).getHexValue(),e._color2value="#"+e._color.getHexValue()):255==e._color.r&&255==e._color.g&&255==e._color.b?(e._amount=-n.colors.slider.amount,e._uniqColor="white",e._color0value="#"+e._color.getHexValue(),e._color1value="#"+e._color.darken(n.colors.slider.amount/2).getHexValue(),e._color2value="#"+e._color.darken(n.colors.slider.amount).getHexValue()):(e._amount=0,e._color0value="#"+e._color.lighten(n.colors.slider.amount).getHexValue(),e._color1value="#"+e._color.getHexValue(),e._color2value="#"+e._color.darken(n.colors.slider.amount).getHexValue())}),n.colors.slider.handleLeft=-n.colors.slider.handleWidth/2,n.colors.slider.handleTop=-n.colors.slider.handleHeight/2,o.$.colors.html(l.tmpl.get("colors",n,n.columnKeys)),o.$.colors.find("[data-ax5palette-color-index]").each(function(){var e=this.getAttribute("data-ax5palette-color-index"),t=n.colors.list[e],l=jQuery.extend({},t);l._index=e,l.$item=jQuery(this),l.$preview=l.$item.find('[data-panel="color"]'),l.$label=l.$item.find('[data-panel="color-label"]'),l.$track=l.$item.find('[data-panel="color-track"]'),l.$handle=l.$item.find('[data-panel="color-handle"]'),i(l),a.colors.push(l)}),e&&o.setSelectedColor(e)};this.init=function(){this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.onUpdateColor=n.onUpdateColor,n.target||console.log(ax5.info.getError("ax5palette","401","setConfig")),this.$target=jQuery(n.target),setTimeout(function(){v((n.selectedColor||"").trim())})},this.repaint=function(){return v(),this},this.setSelectedColor=function(e){var l=t.color(e.trim()),o=765,n=-1;if(a.colors.forEach(function(e,t){var a=e._color.getHsl(),r=l.getHsl(),i=Math.abs(a.h-r.h)+Math.abs(a.s-r.s)+Math.abs(a.l-r.l);i<o&&(o=i,n=t)}),n>-1){var r=void 0,i=void 0,f=a.colors[n];f._amount=s(f,l),i=h(f,f._amount),f.$handle.css({left:i}),r=u(f,i),c(f,d(f,r))}return this},this.main=function(){e.palette_instance=e.palette_instance||[],e.palette_instance.push(this),arguments&&t.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),l=ax5.ui.palette}(),function(){var e=ax5.ui.palette,t=function(e){return'\n<div data-ax5palette-container="root">\n    <div data-ax5palette-container="colors"></div>\n    <div data-ax5palette-container="controls"></div>\n</div>\n'},l=function(e){return'\n{{#colors}}\n{{#list}}\n<div data-ax5palette-color="{{label}}" data-ax5palette-color-index="{{@i}}">\n    <div data-panel="color-preview" style="padding:{{preview.cellPadding}}px;width:{{preview.cellWidth}}px;">\n        <div data-panel="color-box" style="width:{{preview.width}}px;height:{{preview.height}}px;"><div data-panel="color" style="background-color:{{value}};"></div></div>\n    </div>\n    <div data-panel="color-label" style="width:{{label.width}}px;">{{label}}</div>\n    <div data-panel="color-slider">\n        <div data-panel="color-track" style="height:{{slider.trackHeight}}px;background: linear-gradient(90deg, {{_color0value}}, {{_color1value}}, {{_color2value}}); ">\n            <div data-panel="color-handle">\n                <div data-panel="color-handle-after" style="width:{{slider.handleWidth}}px;height:{{slider.handleWidth}}px;left:{{slider.handleLeft}}px;top:{{slider.handleLeft}}px;"></div>\n            </div>\n        </div>\n    </div>\n</div>\n{{/list}}\n{{/colors}}\n'};e.tmpl={frame:t,colors:l,get:function(t,l,o){return ax5.mustache.render(e.tmpl[t].call(this,o),l)}}}();
//# sourceMappingURL=ax5palette.min.js.map
