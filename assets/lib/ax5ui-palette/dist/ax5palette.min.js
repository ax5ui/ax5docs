"use strict";!function(){var e=ax5.ui,t=ax5.util,o=void 0;e.addClass({className:"palette"},function(){return function(){var l=this,a=this,n=void 0;this.instanceId=ax5.getGuid(),this.target=null,this.config={clickEventName:"click",theme:"default",animateTime:100,colors:{preview:{width:24,height:24,cellWidth:30},label:{width:80},slider:{trackHeight:8,amount:32,handleWidth:18,handleHeight:18},list:[{label:"red",value:"#ff0000"},{label:"orange",value:"#ff9802"},{label:"yellow",value:"#ffff00"},{label:"green",value:"#00ff36"},{label:"blue",value:"#0000ff"},{label:"purple",value:"#ba00ff"},{label:"black",value:"#000000"},{label:"white",value:"#ffffff"}]},controls:{height:0},columnKeys:{}},this.xvar={},this.colors=[],n=this.config;var i=function(e){var t=void 0,o=e.originalEvent?e.originalEvent:e;return t="changedTouches"in o&&o.changedTouches?o.changedTouches[0]:o,{clientX:t.pageX,clientY:t.pageY}},r=function(e){e.originalTrackWidth=e.$track.width(),e.trackWidth=e.originalTrackWidth-n.colors.slider.handleWidth/5;var t=e._amount*(e.trackWidth/2)/n.colors.slider.amount+e.trackWidth/2;e.$handle.css({left:t}),e.$item.off("mousedown").on("mousedown",'[data-panel="color-handle"]',function(t){var o=i(t);e._originalHandleClientX=o.clientX,e._originalHandleLeft=e.$handle.position().left,s.on(e)}).off("click").on("click",'[data-panel="color-label"], [data-panel="color-preview"]',function(t){a.onClick&&a.onClick.call(e,"#"+e._selectedColor.toUpperCase())})},c=function(e,t){e.$preview.css({"background-color":"#"+t}),e.$label.html("#"+t.toUpperCase()),e._selectedColor=t,a.onUpdateColor&&a.onUpdateColor.call(e,"#"+e._selectedColor.toUpperCase())},d=function(e,t){var o={black:function(e,t){return e.lighten(n.colors.slider.amount/2).darken(t).getHexValue()},white:function(e,t){return e.darken(n.colors.slider.amount/2).darken(t).getHexValue()},normal:function(e,t){return e.darken(t).getHexValue()}};return e._uniqColor in o?o[e._uniqColor](e._color,t):o.normal(e._color,t)},s={on:function(e){jQuery(document.body).on("mousemove.ax5palette-"+l.instanceId,function(t){var o=i(t),l=o.clientX-e._originalHandleClientX,a=e._originalHandleLeft+l,r=void 0;a=a<0?0:a>e.trackWidth?e.trackWidth:a,e.$handle.css({left:a}),r=n.colors.slider.amount*(a-e.originalTrackWidth/2)/(e.trackWidth/2),c(e,d(e,r)),o=null,l=null}).on("mouseup.ax5palette-"+l.instanceId,function(e){s.off(),t.stopEvent(e)}).on("mouseleave.ax5palette-"+l.instanceId,function(e){s.off(),t.stopEvent(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){a.xvar.resizerLived=!1,jQuery(document.body).off("mousemove.ax5palette-"+l.instanceId).off("mouseup.ax5palette-"+l.instanceId).off("mouseleave.ax5palette-"+l.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},u=function(){({width:l.$target.innerWidth(),height:l.$target.innerHeight()});l.$target.html(o.tmpl.get("frame",{},n.columnKeys)),l.$={root:l.$target.find('[data-ax5palette-container="root"]'),colors:l.$target.find('[data-ax5palette-container="colors"]'),controls:l.$target.find('[data-ax5palette-container="controls"]')},l.$.controls.css({height:n.controls.height}),n.colors.list.forEach(function(e){e._color=t.color(e.value),e._selectedColor=e._color.getHexValue(),0==e._color.r&&0==e._color.g&&0==e._color.b?(e._amount=n.colors.slider.amount,e._uniqColor="black",e._color0value="#"+e._color.lighten(n.colors.slider.amount).getHexValue(),e._color1value="#"+e._color.lighten(n.colors.slider.amount/2).getHexValue(),e._color2value="#"+e._color.getHexValue()):255==e._color.r&&255==e._color.g&&255==e._color.b?(e._amount=-n.colors.slider.amount,e._uniqColor="white",e._color0value="#"+e._color.getHexValue(),e._color1value="#"+e._color.darken(n.colors.slider.amount/2).getHexValue(),e._color2value="#"+e._color.darken(n.colors.slider.amount).getHexValue()):(e._amount=0,e._color0value="#"+e._color.lighten(n.colors.slider.amount).getHexValue(),e._color1value="#"+e._color.getHexValue(),e._color2value="#"+e._color.darken(n.colors.slider.amount).getHexValue())}),n.colors.slider.handleLeft=-n.colors.slider.handleWidth/2,n.colors.slider.handleTop=-n.colors.slider.handleHeight/2,l.$.colors.html(o.tmpl.get("colors",n,n.columnKeys)),l.$.colors.find("[data-ax5palette-color-index]").each(function(){var e=this.getAttribute("data-ax5palette-color-index"),t=n.colors.list[e],o=jQuery.extend({},t);o._index=e,o.$item=jQuery(this),o.$preview=o.$item.find('[data-panel="color"]'),o.$label=o.$item.find('[data-panel="color-label"]'),o.$track=o.$item.find('[data-panel="color-track"]'),o.$handle=o.$item.find('[data-panel="color-handle"]'),r(o),a.colors.push(o)})};this.init=function(){this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.onUpdateColor=n.onUpdateColor,n.target||console.log(ax5.info.getError("ax5palette","401","setConfig")),this.$target=jQuery(n.target),setTimeout(function(){u()})},this.repaint=function(){u()},this.main=function(){e.palette_instance=e.palette_instance||[],e.palette_instance.push(this),arguments&&t.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),o=ax5.ui.palette}(),function(){var e=ax5.ui.palette,t=function(e){return'\n<div data-ax5palette-container="root">\n    <div data-ax5palette-container="colors"></div>\n    <div data-ax5palette-container="controls"></div>\n</div>\n'},o=function(e){return'\n{{#colors}}\n{{#list}}\n<div data-ax5palette-color="{{label}}" data-ax5palette-color-index="{{@i}}">\n    <div data-panel="color-preview" style="padding:{{preview.cellPadding}}px;width:{{preview.cellWidth}}px;">\n        <div data-panel="color-box" style="width:{{preview.width}}px;height:{{preview.height}}px;"><div data-panel="color" style="background-color:{{value}};"></div></div>\n    </div>\n    <div data-panel="color-label" style="width:{{label.width}}px;">{{label}}</div>\n    <div data-panel="color-slider">\n        <div data-panel="color-track" style="height:{{slider.trackHeight}}px;background: linear-gradient(90deg, {{_color0value}}, {{_color1value}}, {{_color2value}}); ">\n            <div data-panel="color-handle">\n                <div data-panel="color-handle-after" style="width:{{slider.handleWidth}}px;height:{{slider.handleWidth}}px;left:{{slider.handleLeft}}px;top:{{slider.handleLeft}}px;"></div>\n            </div>\n        </div>\n    </div>\n</div>\n{{/list}}\n{{/colors}}\n'};e.tmpl={frame:t,colors:o,get:function(t,o,l){return ax5.mustache.render(e.tmpl[t].call(this,l),o)}}}();
//# sourceMappingURL=ax5palette.min.js.map
